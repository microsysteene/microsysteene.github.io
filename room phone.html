<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Ma Room</title>
  <link rel="icon" type="image/png" href="./assets/icon/favicon.png">

  <style>
    :root {
      --bg: #f2f4f8;
      --card: #ffffff;
      --text: #111;
      --primary: #000;
      --accent: #6c5ce7;
      --nav-height: 60px;
    }

    body.dark-mode {
      --bg: #121212;
      --card: #1e1e1e;
      --text: #fff;
      --primary: #fff;
    }

    body {
      margin: 0;
      background-color: var(--bg);
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      color: var(--text);
      padding-bottom: 80px; /* Espace pour le FAB */
    }

    /* HEADER */
    header {
      position: sticky;
      top: 0;
      background: var(--card);
      padding: 15px 20px;
      z-index: 50;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .room-info h1 { font-size: 1.2rem; margin: 0; font-weight: 800; }
    .room-code { 
        font-family: monospace; 
        background: rgba(0,0,0,0.05); 
        padding: 4px 8px; 
        border-radius: 6px; 
        font-size: 0.9rem; 
        margin-left: 8px;
    }

    /* TABS */
    .tabs {
        display: flex;
        padding: 10px 20px;
        gap: 15px;
        overflow-x: auto;
        white-space: nowrap;
        scrollbar-width: none; 
    }
    .tab {
        padding: 8px 16px;
        border-radius: 20px;
        font-size: 0.9rem;
        font-weight: 600;
        background: transparent;
        color: var(--text);
        border: 1px solid rgba(0,0,0,0.1);
        opacity: 0.7;
        transition: all 0.2s;
    }
    .tab.active {
        background: var(--primary);
        color: var(--bg);
        opacity: 1;
        border-color: var(--primary);
    }

    /* TICKET LIST */
    .ticket-list { padding: 10px 20px; display: flex; flex-direction: column; gap: 15px; }

    .ticket-card {
        background: var(--card);
        border-radius: 16px;
        padding: 20px;
        display: flex;
        align-items: center;
        gap: 15px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.02);
        position: relative;
        overflow: hidden;
    }
    
    /* Indicateur de couleur sur le côté gauche */
    .ticket-card::before {
        content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 6px;
        background: var(--ticket-color, #cdcdcd);
    }

    .checkbox-circle {
        width: 24px; height: 24px; border: 2px solid rgba(0,0,0,0.2); border-radius: 50%;
        flex-shrink: 0;
    }
    
    .ticket-content { flex: 1; }
    .ticket-name { font-weight: 700; font-size: 1.1rem; margin-bottom: 4px; }
    .ticket-desc { font-size: 0.9rem; opacity: 0.6; }
    
    .ticket-time { 
        font-size: 0.8rem; opacity: 0.5; text-align: right; 
        display: flex; flex-direction: column; align-items: flex-end;
    }

    /* FAB (Floating Action Button) */
    .fab {
        position: fixed;
        bottom: 30px;
        right: 20px;
        width: 60px;
        height: 60px;
        background: var(--primary);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        color: var(--bg);
        font-size: 2rem;
        text-decoration: none;
        z-index: 100;
        transition: transform 0.2s;
    }
    .fab:active { transform: scale(0.9); }

    /* NAVBAR (Settings etc) */
    .bottom-nav {
        position: fixed; top: 15px; right: 15px; /* On met les settings en haut à droite sur mobile */
        display: flex; gap: 10px; z-index: 51;
    }
    .nav-icon {
        width: 36px; height: 36px;
        background: rgba(0,0,0,0.05);
        border-radius: 50%;
        display: flex; align-items: center; justify-content: center;
    }
    .nav-icon img { width: 18px; height: 18px; object-fit: contain; }
    body.dark-mode .nav-icon img { filter: invert(1); }

    /* OVERLAY / MODAL STYLE */
    .modal-backdrop {
        position: fixed; inset: 0; background: rgba(0,0,0,0.6); 
        z-index: 200; opacity: 0; pointer-events: none; transition: opacity 0.3s;
        backdrop-filter: blur(2px);
    }
    .modal-sheet {
        position: fixed; bottom: 0; left: 0; right: 0;
        background: var(--card);
        border-radius: 24px 24px 0 0;
        padding: 24px;
        z-index: 201;
        transform: translateY(110%);
        transition: transform 0.3s cubic-bezier(0.19, 1, 0.22, 1);
        max-height: 85vh;
        overflow-y: auto;
    }
    
    .active-modal .modal-backdrop { opacity: 1; pointer-events: auto; }
    .active-modal .modal-sheet { transform: translateY(0); }

    /* Form Styles inside Modal */
    .input-group { margin-bottom: 20px; }
    .input-group label { display: block; margin-bottom: 8px; font-weight: 600; font-size: 0.9rem; }
    .input-field {
        width: 100%; padding: 12px; border-radius: 12px;
        border: 1px solid rgba(0,0,0,0.1); background: var(--bg); color: var(--text);
        font-size: 1rem; box-sizing: border-box;
    }
    
    .color-picker { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 10px; }
    .color-dot {
        width: 40px; height: 40px; border-radius: 50%; border: 2px solid transparent; flex-shrink: 0;
    }
    .color-dot.selected { border-color: var(--text); transform: scale(1.1); }

    .btn-full {
        width: 100%; padding: 16px; border-radius: 14px;
        background: var(--primary); color: var(--bg);
        text-align: center; text-decoration: none; font-weight: 600;
        display: block; margin-top: 10px;
    }
    
    .btn-danger { background: #ff7070; color: white; }

  </style>
</head>
<body>

  <header>
    <div class="room-info">
      <span>Room <span class="room-code">#C891</span></span>
    </div>
    
    <div class="bottom-nav">
       <div class="nav-icon" id="toggleTheme"><img src="./assets/icon/darkmod.png"></div>
       <div class="nav-icon" id="openSettings"><img src="./assets/icon/Settings.png"></div>
       <div class="nav-icon" style="background: #ffe0e0;"><img src="./assets/icon/logout.png"></div>
    </div>
  </header>

  <div class="tabs">
      <div class="tab active">En cours</div>
      <div class="tab">Historique</div>
      <div class="tab">Fichiers (0)</div>
  </div>

  <div class="ticket-list" id="ticketsContainer">
      
      <div class="ticket-card" style="--ticket-color: #ffb7b7;">
          <div class="checkbox-circle"></div>
          <div class="ticket-content">
              <div class="ticket-name">Charly Chartreux</div>
              <div class="ticket-desc">Bug graphique</div>
          </div>
          <div class="ticket-time">
              <span>09:41</span>
              <span>(5m)</span>
          </div>
      </div>

      <div class="ticket-card" style="--ticket-color: #A6C5FF;">
          <div class="checkbox-circle"></div>
          <div class="ticket-content">
              <div class="ticket-name">Ethan Caillat</div>
              <div class="ticket-desc">Designer</div>
          </div>
          <div class="ticket-time">
              <span>09:50</span>
              <span>(2m)</span>
          </div>
      </div>

  </div>

  <a href="#" class="fab" id="newTicketBtn">+</a>

  <div id="modalCreate" class="">
      <div class="modal-backdrop" onclick="closeModal('modalCreate')"></div>
      <div class="modal-sheet">
          <h2 style="margin-top:0;">Nouveau ticket</h2>
          
          <div class="input-group">
              <input type="text" class="input-field" placeholder="Votre Nom">
          </div>
          
          <div class="input-group">
              <input type="text" class="input-field" placeholder="Description (optionnel)">
          </div>
          
          <div class="input-group">
              <label>Priorité / Couleur</label>
              <div class="color-picker">
                  <div class="color-dot selected" style="background: #cdcdcd;"></div>
                  <div class="color-dot" style="background: #FFA6A6;"></div>
                  <div class="color-dot" style="background: #FFF5A6;"></div>
                  <div class="color-dot" style="background: #A6C5FF;"></div>
                  <div class="color-dot" style="background: #AEFFA6;"></div>
              </div>
          </div>
          
          <div class="input-group" style="border: 2px dashed #ccc; padding: 20px; text-align: center; border-radius: 12px;">
              <span style="opacity: 0.6;">Appuyer pour ajouter un fichier</span>
              <input type="file" style="position: absolute; opacity: 0; width: 100%; left: 0; height: 50px;">
          </div>

          <a href="#" class="btn-full" onclick="closeModal('modalCreate')">Créer le ticket</a>
      </div>
  </div>

  <div id="modalSettings" class="">
      <div class="modal-backdrop" onclick="closeModal('modalSettings')"></div>
      <div class="modal-sheet">
          <h2 style="margin-top:0;">Paramètres</h2>
          
          <div class="input-group">
             <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0;">
                 <span>Tickets max / personne</span>
                 <span style="font-weight: bold; background: #eee; padding: 5px 10px; border-radius: 8px;">1</span>
             </div>
             <input type="range" min="1" max="5" style="width: 100%;">
          </div>

          <div class="input-group">
              <a href="#" class="btn-full" style="background: #eee; color: #333;">Partager le lien</a>
          </div>

          <div class="input-group">
              <a href="#" class="btn-full btn-danger">Supprimer la room</a>
          </div>
      </div>
  </div>

  <script>
      // Gestionnaire de Modal Simple
      function openModal(id) {
          document.getElementById(id).classList.add('active-modal');
      }
      function closeModal(id) {
          document.getElementById(id).classList.remove('active-modal');
      }

      document.getElementById('newTicketBtn').addEventListener('click', (e) => {
          e.preventDefault();
          openModal('modalCreate');
      });

      document.getElementById('openSettings').addEventListener('click', () => {
          openModal('modalSettings');
      });

      // Dark Mode logic (basique)
      document.getElementById('toggleTheme').addEventListener('click', () => {
          document.body.classList.toggle('dark-mode');
      });
      
      // Select Color Logic
      document.querySelectorAll('.color-dot').forEach(dot => {
          dot.addEventListener('click', function() {
              document.querySelectorAll('.color-dot').forEach(d => d.classList.remove('selected'));
              this.classList.add('selected');
          });
      });
  </script>

  <script src="./assets/js/room.js"></script> 
</body>
</html>