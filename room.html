<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ticket - Room</title>
  <link rel="stylesheet" href="./assets/css/style.css" />
  <link rel="icon" type="image/png" href="./assets/icon/favicon.png">
</head>

<body>

  <div class="main">

    <div class="left-container">

      <div class="top">
        <a href="#" class="button-text" id="createbutton" role="button" style="height: 92px;">
          <img class="icon" src="./assets/icon/icon thin.png" alt="">
          <span class="text">Nouveau ticket</span>
        </a>

        <div class="button">
          <a href="#" class="button-text" id="codebutton" role="button">
            <img class="icon" src="./assets/icon/key.png" alt="" style="height: 32px; width: 32px; object-fit: contain;">
            <span class="text">*****</span>
          </a>
          <a href="#" class="button-simple" id="logout" role="button" aria-label="Déconnexion">
            <img class="icon" src="./assets/icon/logout.png" alt="">
          </a>
          <a href="#" class="button-simple" id="setting" role="button" aria-label="Paramètres">
            <img class="icon" src="./assets/icon/Settings.png" alt="">
          </a>
        </div>
      </div>

      <div class="div" id="message"></div>

      <div class="menu-overlay" id="formOverlay" style="display: none;">
          <div class="menu-box">
              <div class="input" style="padding-bottom: 0;">
                  <h1 id="lefttitle">Nouveau ticket</h1>

                  <div style="margin: 15px 0;">
                      <input type="text" id="name" name="name" placeholder="Nom" style="width: 100%;" autocomplete="off"/>
                  </div>

                  <div class="file-upload-container" id="fileUploadContainer" style="margin: 15px 0;">
                      <input type="file" id="fileInput" multiple>
                      <div class="file-drop-area" id="dropArea">
                          <span class="file-placeholder">+ Ajouter un fichier</span>
                      </div>
                      <div id="uploadProgressContainer" class="upload-status-container"></div>
                      <p id="uploadWarning" class="upload-warning">Exportation...</p>
                  </div>

                  <div style="margin: 15px 0;">
                      <input type="text" id="infos" name="infos" placeholder="Description (optionnelle)" style="width: 100%;" autocomplete="off"/>
                  </div>

                  <h2 style="text-align: left; margin-top: 30px; font-size: 1.2rem;">Couleurs</h2>
                  
                  <div class="colorbox" style="margin: 15px 0;">
                      <a class='color selected' id="default" style="background-color: #cdcdcd;"></a>
                      <a class='color' style="background-color: #FFF5A6"></a>
                      <a class='color' style="background-color: #FFA6A6"></a>
                      <a class='color' style="background-color: #FFA6F8"></a>
                      <a class='color' style="background-color: #A6C5FF"></a>
                      <a class='color' style="background-color: #A6FFF0"></a>
                      <a class='color' style="background-color: #AEFFA6"></a>
                  </div>

                  <div class="overlay-footer" style="display: flex; justify-content: center; gap: 15px; margin-top: 30px;">
                      <a class="button-text" id='create' href='#' style="width: auto; padding: 0 30px; margin: 0; min-width: 140px;" role="button">
                          <img class="icon" src="./assets/icon/add.png" alt="">
                          <span class="text">Créer</span>
                      </a>
                      <a class="button-text" id='deleteAnnonce' href='#' style="width: auto; padding: 0 30px; margin: 0; background-color: #ff7070; display: none; min-width: 140px;" role="button">
                          <img class="icon" src="./assets/icon/delete.png" alt="">
                          <span class="text">Supprimer</span>
                      </a>
                  </div>
              </div>
          </div>
      </div>

      <div class="menu-overlay" id="settingsOverlay" style="display: none;">
        <div class="menu-box">
            <div class="input" style="padding-bottom: 0;"> 
                <h1>Paramètres</h1>

                <h2 style="text-align: left; margin-top: 30px; font-size: 1.2rem;">Apparence</h2>
                <div style="display: flex; justify-content: space-between; align-items: center; margin: 15px 0;">
                    <span>Mode Sombre (Bêta)</span>
                    <label>
                        <input type="checkbox" class="toggle-checkbox" id="darkModeToggle">
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div style="display: flex; justify-content: space-between; align-items: center; margin: 15px 0;">
                    <span>Langue (Français uniquement)</span>
                    <a class="button-text" href="#" style="min-height: 40px; width: auto; padding: 0 20px; flex: unset; min-width: 80px;" role="button">
                        <span class="text" style="font-size: 14px;">FR</span>
                    </a>
                </div>

                <div id="adminSettingsSection" style="display: none;">
                    <h2 style="text-align: left; margin-top: 30px; font-size: 1.2rem;">Admin</h2>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin: 15px 0; gap: 10px;">
                        <span style="text-align: left;">Tickets max par utilisateur</span>
                        <div class="slider-selector">
                            <label class="slider-option"><input type="radio" name="SliderCount" value="1" checked><span class="dot" data-val="1"></span></label>
                            <label class="slider-option"><input type="radio" name="SliderCount" value="2"><span class="dot" data-val="2"></span></label>
                            <label class="slider-option"><input type="radio" name="SliderCount" value="3"><span class="dot" data-val="3"></span></label>
                            <label class="slider-option"><input type="radio" name="SliderCount" value="4"><span class="dot" data-val="4"></span></label>
                            <label class="slider-option"><input type="radio" name="SliderCount" value="5"><span class="dot" data-val="5"></span></label>
                        </div>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin: 15px 0;">
                        <span>Partage fichiers invités (WIP)</span>
                        <label>
                            <input type="checkbox" class="toggle-checkbox" id="fileShareToggle">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <h2 style="text-align: left; margin-top: 30px; font-size: 1.2rem;">Salle</h2>
                <div style="display: flex; justify-content: space-between; align-items: center; margin: 15px 0; flex-wrap: wrap; gap: 10px;">
                    <span>Partager le lien</span>
                    <a class="button-text" id="copyLink" href="#" style="min-height: 50px; padding: 0 20px; flex: unset; width: 100%; max-width: 280px; margin: 0;" role="button">
                        <img class="icon" src="./assets/icon/icon thin.png" alt="">
                        <span class="text" id="copyText" style="font-size: 14px;">Copier le lien</span>
                    </a>
                </div>

                <h2 style="text-align: left; margin-top: 30px; font-size: 1.2rem;">Github</h2>
                <div style="display: flex; justify-content: space-between; align-items: center; margin: 15px 0; flex-wrap: wrap; gap: 10px;">
                    <span>Projet Open Source</span>
                    <a class="button-text" href="https://github.com/microsysteene/microsysteene.github.io" target="_blank" style="min-height: 50px; padding: 0 20px; flex: unset; width: 100%; max-width: 200px; margin: 0;">
                         <img class="icon" src="./assets/icon/icon thin.png" alt=""> 
                        <span class="text" style="font-size: 14px;">Voir sur Github</span>
                    </a>
                </div>
                
                <p style="margin-top:20px; font-size: 0.85rem; opacity: 0.7;">
                  (RGPD) Toutes les données sont chiffrées et supprimées à la fin de la session.
                </p>

                <div class="overlay-footer">
                    <a class="button-text" id="closeSettings" href="#" style="width: auto; padding: 0 40px; margin: 0;" role="button">
                        <img class="icon" src="./assets/icon/check.png" alt="">
                        <span class="text">Sauvegarder</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="menu-overlay" id="logoutOverlay" style="display: none;">
        <div class="menu-box" style="max-width: 550px;">
            <div class="input" style="padding-bottom: 0;">
                <h1>Déconnexion ?</h1>
                <p style="margin: 30px 0; opacity: 0.7; text-align: center;">
                    Tu devras rentrer le code de la room pour revenir.
                </p>
                <div class="overlay-footer" style="display: flex; justify-content: center; gap: 15px; margin-top: 30px;">
                    <a class="button-text" id="confirmLogout" href="#" style="width: auto; padding: 0 30px; margin: 0; min-width: 140px;" role="button">
                         <img class="icon" src="./assets/icon/logout.png" alt="">
                        <span class="text">Oui, partir</span>
                    </a>
                    <a class="button-text" id="cancelLogout" href="#" style="width: auto; padding: 0 30px; margin: 0; background-color: #ff7070; min-width: 140px;" role="button">
                         <img class="icon" src="./assets/icon/cross.png" alt="">
                        <span class="text">Non, rester</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

      <div class="div" id="subdiv">
        <h1>Historique</h1>
      </div>
    </div>

    <div class="div" id="right">
      <h1>Ticket en cours</h1>
      <div class="empty-message">Chargement...</div>
    </div>

  </div>

  <script src="./assets/js/darkmode.js" defer></script>
  <script src="./assets/js/room.js" defer></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
        const defColor = document.getElementById("default");
        if(defColor) defColor.classList.add('selected');
        
        document.querySelectorAll('.colorbox .color').forEach(a => {
          a.addEventListener('click', () => {
            document.querySelectorAll('.colorbox .color').forEach(el => el.classList.remove('selected'));
            a.classList.add('selected');
          });
        });
    });
  </script>
</body>
</html>